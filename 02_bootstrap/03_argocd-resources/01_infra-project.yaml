apiVersion: argoproj.io/v1alpha1
kind: AppProject
metadata:
  name: infra
  namespace: infra-argocd
spec:
  description: Infrastructure Component Deployments
  sourceRepos:
    - https://gitlab.com/juulun/gitops.git
    # Warning: Use the variant below (without oci://), as helm does not handle this properly. Requires a repository with enableOCI to be configured.
    #- oci://registry-1.docker.io/bitnamicharts
    - registry-1.docker.io/bitnamicharts
    # traefik
    - https://traefik.github.io/charts
    # smb-driver
    - https://raw.githubusercontent.com/kubernetes-csi/csi-driver-smb/master/charts
    # local-path-provisioner
    - https://github.com/rancher/local-path-provisioner
    # longhorn
    - https://charts.longhorn.io
    # bitwarden / external-secrests
    - https://charts.external-secrets.io
  destinations:
    - namespace: 'infra-*'
      server: https://kubernetes.default.svc
  clusterResourceWhitelist:
    - group: '*'
      kind: '*'
